from source_code.cmp.modules.compression import lzma as lzma, lzw as lzw
import matplotlib.image as img
import os

FILES_DIR = '../resources/images/uncompressed/original/'


def analyse_files(files_dir):
    for subdir, dirs, files in os.walk(files_dir):
        for file in files:
            if file.endswith('.bmp'):
                print('Compressing %s...' % file)
                image_data = img.imread(files_dir + '\\' + file).ravel()
                lzma_file = lzma.open(file.replace('.bmp', '.lzma'), 'wb')
                lzma_file.write(image_data)
                lzma_file.close()

def main():
    if __name__ == '__main__':
       analyse_files(FILES_DIR)

main()